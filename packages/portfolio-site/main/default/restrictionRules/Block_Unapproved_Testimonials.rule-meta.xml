<?xml version="1.0" encoding="UTF-8" ?>
<RestrictionRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <active>true</active>
    <description>
        Restricts visibility so users who LACK the View_Unapproved_Testimonials custom permission
        (including Guest Users) only see Approved testimonials.
    </description>
    <enforcementType>Restrict</enforcementType>
    <masterLabel>Block_Unapproved_Testimonials</masterLabel>

    <userCriteria
  >$Permission.View_Unapproved_Testimonials = false</userCriteria>

    <recordFilter>Approved__c = true</recordFilter>

    <targetEntity>Testimonial__c</targetEntity>
    <version>1</version>
</RestrictionRule>
